<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;400;900&display=swap" rel="stylesheet">

    <title>Local Storage - JS</title>

    <style>

      * {
	  box-sizing: border-box;
	  margin: 0;
      }
      
      html {
	  font-family: 'Roboto', sans-serif;
      }

      section {
	  display: grid;
	  min-height: 100vh;
	  align-content: center;
	  justify-content: center;
	  background: whitesmoke;
	  padding-bottom: 30px;
      }

      input {
	  font-family: inherit;
	  padding: 7px;
	  height: 40px;
	  margin-top: 5px;
	  font-size: 1.1em;
	  border: 1px solid #ddd;
	  border-radius: 4px;
      }

      legend {
	  position: relative;
	  color: #999;
	  font-size: 14px;
      }
      
      button {
	  font-family: inherit;
	  font-size: 1em;
	  cursor: pointer;
	  padding: 7px;
	  height: 40px;
	  margin-top: 10px;
	  background: linear-gradient(-50deg, lightgreen, green);
	  border: none;
	  color: white;
	  text-shadow: 0 1px 3px #333333aa;
	  font-weight: bold;
	  border-radius: 4px;
	  transition: 0.3s ease-in-out background;
	  background-position: 0 33px;
	  outline: none;
	  text-transform: uppercase;
      }

      button:hover {
	  background-position: 0 0;
      }

      .message {
	  text-align: center;
	  transition: 0.5s opacity;
	  padding: 10px;
	  margin: 4px 0;
	  border-radius: 4px;
	  font-weight: bold;
	  background: tomato;
	  width: 300px;
	  color: whitesmoke;
      }
      
      fieldset {
	  width: 300px;
	  margin-top: 20px;
	  display: grid;
	  border: none;
	  border-radius: 4px;
	  background: white;
	  box-shadow: 2px 0 10px #33333310;
      }

      #lsOutput {
	  line-height: 22px;
      }

    </style>
  </head>
  <body>
    <section>
      <fieldset>
	<legend>Insert Data</legend>
	<input type="text" id="inpKey" placeholder="Enter Key..." autofocus>
	<input type="text" id="inpValue" placeholder="Enter Value...">
	<button type="button" id="btnInsert">Insert Data</button>
      </fieldset>

      <fieldset>
	<legend>Local Storage</legend>
	<div id="lsOutput"></div>
      </fieldset>
    </section>

    <footer style="color: #222; border-top: 0.5px solid #ccc; text-align: center; padding: 5px;">
      <p><small>Coded by <a style="color: #222; text-decoration: none;" href="https://github.com/rodionsibov"><b>Rodion Sibov</b></a> | <span class="year"></span></small></p>
    </footer>

    <script>
      // change the footer background color and update the year
      document.querySelector('footer').style.background = `#${Math.random().toString(16).slice(2, 8)}30`
      document.querySelector('.year').textContent = new Date().getFullYear();
    </script>

    <script>
      
      const inpKey = document.querySelector('#inpKey');
      const inpValue = document.querySelector('#inpValue');
      const btnInsert = document.querySelector('#btnInsert');
      const lsOutput = document.querySelector('#lsOutput');

      btnInsert.addEventListener('click', () => {
	  const key = inpKey.value;
	  const value = inpValue.value;

	  if (key && value) {
	      localStorage.setItem(key, value);
	      location.reload();
	  } else {
	      const pEl = document.createElement('p');
	      pEl.classList.add('message');
	      pEl.innerHTML = '📝 Please fill out all fields.';
	      document.querySelector('section').insertBefore(pEl, document.querySelector('fieldset'))
	      setTimeout(() => pEl.style.opacity = '0', 1000);
	      pEl.addEventListener('transitionend', () => pEl.remove()); 
	      
	  }
	  
      })

      for (let i = 0; i < localStorage.length; i++) {
	  const key = localStorage.key(i);
	  const value = localStorage.getItem(key);
	  lsOutput.innerHTML += `${key}: ${value}<br>`;
      }

      </script>
  </body>
</html>
