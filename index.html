<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="description" content="Hello, I am Rodion. I have a life interest for all things web and developing code. I will use this website to share my personal projects.">

    <!-- <link rel="stylesheet" href="https://bootswatch.com/4/united/bootstrap.min.css"> -->
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <title>Rodion - My Personal Projects</title>

    <style>
      
      body {

      }

      .progress {
	  height: 3px;
	  width: 102%;
	  position: fixed;
	  top: 0;
	  z-index: 100;
	  left: -1%;
	  overflow: hidden;
      }

      .progress__highlight {
	  transition: width 0.15s linear;
	  background: dodgerblue;
	  height: 100%;
	  width: 0%;
	  backdrop-filter: blur(5px); 
      }

      /* .header { */
      /* 	  margin-top: 40px; */
      /* } */

      /* @media screen and (max-width: 700px) { */
      /* 	  .header { */
      /* 	      margin-top: 100px; */
      /* 	  } */
      /* } */

      
    </style>
  </head>
  <body>

    <div class="progress">
      <div class="progress__highlight" id="js-highlight"></div>
    </div>

    <div id="js-container">

      <nav class="navbar navbar-light">
	<a class="navbar-brand" href="https://rodionsibov.github.io/projects/">
	  <span class="badge badge-primary">{RS}</span>
	</a>
	  <form class="form-inline my-2 my-lg-0">
	    <input class="form-control mr-sm-2" type="search" placeholder="Search">
	    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
	  </form>
      </nav>
      
      <!-- Header -->
      <div class="header container">
	<div class="jumbotron bg-light">
	  <h1 class="display-4 typewriter">Mini web projects using HTML, CSS & JS</h1>
	  <p class="lead">Hello, I am Rodion. I have a life interest for all things web and developing code. </p>
	  <hr class="my-4">
	  <p>The more you practice, the better your skills will become! You are free to modify, save, share, use or do whatever you want with them. Experiment and have fun! üòâ</p>
	</div>
      </div>

      <!-- Projects -->
      <div  class="container">
	<div id="projects" class="row row-cols-1 row-cols-sm-2 row-cols-lg-3">
	  
	</div>
      </div> 

      <div class="container text-center mb-4 mt-4">
	<button id="loadMore" type="button" class="btn btn-primary">Load More</button>
      </div>
      
      
    </div> <!-- js-container -->
    
    <footer style="text-align: center; padding: 10px;">
      <small>Made with ‚ù§ by <a style="color: #222; text-decoration: none;" href="https://github.com/rodionsibov" target="_blank">Rodion Sibov</a> | <span class="year"></span></small>
    </footer>

    <script>
      document.querySelector('.year').textContent = new Date().getFullYear();
    </script>



    <!-- Optional JavaScript -->

    <script>
      const badgeEl = document.querySelector(".badge");
      setInterval(() => {
	  badgeEl.classList.toggle("badge-success");
	  
      }, 5000)
      
    </script>



    
    <script>

      const container = document.getElementById('js-container');
      const highlight = document.getElementById('js-highlight');
      let containerHeight;

      window.onscroll = function() {

	  containerHeight = container.offsetHeight - window.innerHeight;
	  containerPos = container.getBoundingClientRect();
	  diff = containerHeight + containerPos.top;
	  progressPercentage =  diff / containerHeight * 100;
	  cssWidth = Math.floor(100 - progressPercentage);

	  highlight.style.width = cssWidth + "%"; 

      };


    </script>
    

    <script>
      function w(d,e,c) {
	  b = d.slice(0, c),
	  b == d ? e.innerHTML = b : (e.innerHTML = b + "|",
				      setTimeout(w, 100, d, e, c + 1))
      }

      window.addEventListener("DOMContentLoaded", function() {
	  for (i of document.getElementsByClassName("typewriter"))
	      w(i.innerHTML, i, 0)
      }, false)

    </script>

    <script src="projectsInfo.js"></script>
    <script>

      // get first n elements of the array
      let loadMore = 12;
      const projects = projectsInfo.slice(0, loadMore);

      document.querySelector("#loadMore").addEventListener("click", () => {
	  loadMore > projectsInfo.length ? document.querySelector("#loadMore").disabled = true : loadMore += 6;
	  showProjects(projectsInfo.slice(0, loadMore));
      })

      document.querySelector("form button").addEventListener("click", (e) => {
       	  e.preventDefault();
       	  const searchText = document.querySelector("form input").value
	  if (!searchText) {
	      return;
	      
	  }

	  const filteredProjects = projectsInfo.filter(project => {
	      const regex = new RegExp(`${searchText}`, "gi");
	      return project.title.match(regex);
	  }); 

	  showProjects(filteredProjects);
	  document.querySelector("#loadMore").style.display = "none";
      })

      const showProjects = (projects) => {
	  let html = "";
	  for (project of projects) {
	      //const diffMin = Math.ceil(Math.abs(new Date() - new Date(project.date)) / (60 * 60 * 24));

	      html += `
	<div class="col mb-4">
	  <div class="card">
	    <div class="card-img-top embed-responsive embed-responsive-1by1">
	      <iframe class="embed-responsive-item" src="${project.url}"></iframe>
	    </div>
	    <div class="card-body">
	      <h5 class="card-title"><a href="${project.url}" target="_blank">${project.title}</a></h5>
	      <p class="card-text">${project.text}</p>
	    </div>
	    <div class="card-footer bg-transparent">
	      <small class="text-muted">Last updated ${new Date(project.date).toDateString()}</small>
	    </div>
	  </div>
	</div>

`;

	  }
	  document.querySelector("#projects").innerHTML = html;
	  
      }
      showProjects(projects);



      </script>
    

  </body>
</html>
